<script>

  // bad way to implement this but whatever
  async function removeItem(item_id, url, reloadAfterSuccess = false) {
    await $.ajax({
      url: url,
      method: 'POST',
      data: {
        item_id: item_id,
        csrfmiddlewaretoken: '{{ csrf_token }}'  // Include the CSRF token for security
      },
      dataType: 'json',
      success: function (response) {
        if (response.success) {
          if (!reloadAfterSuccess) {
            window.location.href = load_page_url
          }
        } else if (response.error) {
          showAlert('error', 'خطا', response.error);
        }
        else {
          showAlert('error', 'خطا', 'حذف انجام نشد');
        }
      },
      error: function () {
        // AJAX request failed, handle the error or show an error message
        showAlert('error', 'خطا', 'خطا نامشخصی رخ داد لطفا بعد از بازنشانی صفحه دوباره امتحان کنید');
      }
    });
  }


</script>